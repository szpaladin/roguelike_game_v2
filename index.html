<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Roguelike 重构版 v2.0</title>
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <div class="game-container">
        <main class="game-main">
            <section class="game-left">
                <div class="map-container">
                    <canvas id="game-canvas" width="600" height="600"></canvas>
                    <!-- 技能点指示器 -->
                    <div id="skill-point-ui" class="skill-point-ui" style="display: none;">
                        <div class="key-e-icon">E</div>
                        <div class="skill-text">升级</div>
                        <div class="skill-count" id="skill-count-ui">(0)</div>
                    </div>
                </div>
                <div class="controls">
                    <div class="control-hint">使用 WASD 移动，E 键打开升级菜单</div>
                </div>
            </section>

            <section class="game-right">
                <div class="panel player-panel">
                    <h2>角色状态</h2>
                    <div class="stat-row">
                        <span>生命值：</span>
                        <div class="health-bar">
                            <div class="health-fill" id="health-fill"></div>
                        </div>
                        <span id="health-text">100/100</span>
                    </div>
                    <div class="stat-row">
                        <span>等级：</span><span id="level">1</span>
                    </div>
                    <div class="stat-row">
                        <span>经验：</span>
                        <div class="exp-bar">
                            <div class="exp-fill" id="exp-fill"></div>
                        </div>
                        <span id="exp">0/10</span>
                    </div>
                    <div class="stat-row"><span>技能点：</span><span id="skill-points">0</span></div>
                    <div class="stat-row"><span>力量：</span><span id="strength">50</span></div>
                    <div class="stat-row"><span>智力：</span><span id="intelligence">50</span></div>
                    <div class="stat-row"><span>防御力：</span><span id="defense">2</span></div>
                    <div class="stat-row"><span>金币：</span><span id="gold">0</span></div>
                    <div class="stat-row"><span>距离：</span><span id="floor">0</span></div>
                </div>

                <div class="panel weapon-panel">
                    <h2>角色武器</h2>
                    <div class="weapon-grid" id="weapon-grid">
                        <!-- 由 JS 动态填充 -->
                    </div>
                </div>

                <div class="panel inventory-panel">
                    <h2>背包</h2>
                    <div class="inventory-grid" id="inventory">
                        <!-- 由 JS 动态填充 -->
                    </div>
                </div>

                <div class="panel log-panel">
                    <h2>日志</h2>
                    <div class="log-content" id="log-content"></div>
                </div>
            </section>
        </main>

        <!-- 升级菜单 -->
        <div class="overlay" id="upgrade-overlay" style="display:none;">
            <div class="dialog upgrade-dialog">
                <h2 id="upgrade-title">选择一项武器</h2>
                <div class="upgrade-options" id="upgrade-options">
                    <!-- 由 JS 动态填充 -->
                </div>
            </div>
        </div>

        <!-- 宝箱菜单 -->
        <div class="overlay" id="chest-menu" style="display:none;">
            <div class="dialog">
                <h2>发现宝箱！</h2>
                <div id="chest-options" class="reward-options"></div>
            </div>
        </div>

        <!-- 进化菜单 -->
        <div class="overlay" id="fusion-overlay" style="display:none;">
            <div class="dialog">
                <h2>武器进化</h2>
                <div id="fusion-options" class="fusion-options"></div>
            </div>
        </div>

        <!-- 游戏结束 -->
        <div class="overlay" id="game-over" style="display:none;">
            <div class="dialog death-dialog">
                <h2>你已死亡</h2>
                <p>最终距离: <span id="final-score">0</span></p>
                <p>最终等级: <span id="final-level">0</span></p>
                <button id="restart-btn" class="btn">重新开始</button>
            </div>
        </div>
    </div>

    <script type="module" src="js/main.js"></script>
</body>

</html>